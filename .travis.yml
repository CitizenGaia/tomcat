sudo: required

language: java

jdk:
  - oraclejdk8

services:
  - docker

env:
  - IMAGE=citizengaia/tomcat:1.0-SNAPSHOT

before_install:
  # troubleshooting info in case of problems
  - docker version
  - docker info

services:
  - docker

branches:
  only:
    - master

after_success:
  - mkdir -p '/tmp/logs/'
  # start container 
  - docker run --rm -p '8080:8080' -v '/tmp/logs:/hostfs/tomcat/logs' --name=tomcat $IMAGE 
  # test running container
  - bash <(curl -s http://localhost:8080/) 
  # stop container 
  - docker stop tomcat 
  - ls -lrt '/tmp/logs/'
  
